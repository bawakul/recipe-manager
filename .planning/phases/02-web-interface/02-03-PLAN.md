---
phase: 02-web-interface
plan: 03
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - frontend/components/RecipeChecklist.tsx
  - frontend/components/ProgressBar.tsx
autonomous: true

must_haves:
  truths:
    - "Recipe title displays at top of page"
    - "Progress shows X of Y steps complete"
    - "Clicking checkbox toggles step completion"
    - "Ingredients display as reference list"
    - "All sections display with headers"
  artifacts:
    - path: "frontend/components/RecipeChecklist.tsx"
      provides: "Interactive checklist view"
      min_lines: 60
    - path: "frontend/components/ProgressBar.tsx"
      provides: "Visual progress indicator"
      min_lines: 15
  key_links:
    - from: "frontend/components/RecipeChecklist.tsx"
      to: "frontend/lib/storage.ts"
      via: "useLocalStorage import"
      pattern: "import.*useLocalStorage.*from.*lib/storage"
    - from: "frontend/components/RecipeChecklist.tsx"
      to: "frontend/lib/types.ts"
      via: "Recipe type import"
      pattern: "import.*Recipe.*from.*lib/types"
---

<objective>
Build the recipe checklist display with interactive steps, progress tracking, and localStorage persistence.

Purpose: Core value delivery - turn parsed recipe into a usable, trackable checklist.
Output: Interactive checklist view with persisted checkbox state.
</objective>

<execution_context>
@/Users/bharadwajkulkarni/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bharadwajkulkarni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-web-interface/02-CONTEXT.md
@.planning/phases/02-web-interface/02-RESEARCH.md
@frontend/lib/types.ts
@frontend/lib/storage.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ProgressBar component</name>
  <files>frontend/components/ProgressBar.tsx</files>
  <action>
    Create reusable progress bar component.

    Props:
    - completed: number (count of completed steps)
    - total: number (total step count)

    Implementation:
    1. Calculate percentage: Math.round((completed / total) * 100)
    2. Container: flex items-center gap-4
    3. Text indicator on right: "X of Y steps" in text-[#39FF6D] font-medium
    4. Bar container: flex-1 h-2 bg-[#2d2d2d] rounded-full overflow-hidden
    5. Fill bar inside: h-full bg-[#39FF6D] with style={{ width: `${percentage}%` }}
    6. Add transition-all duration-300 for smooth animation

    Edge case: if total is 0, show 0% (avoid division by zero).
  </action>
  <verify>
    cd frontend && npx tsc --noEmit
  </verify>
  <done>
    - Progress bar renders with correct percentage
    - Text shows "X of Y steps"
    - Bar animates smoothly on changes
  </done>
</task>

<task type="auto">
  <name>Task 2: Create RecipeChecklist component</name>
  <files>frontend/components/RecipeChecklist.tsx</files>
  <action>
    Create the main checklist view for displaying and interacting with recipes.

    Props:
    - recipe: Recipe
    - onStartOver: () => void (callback to clear and start fresh)

    State (using useLocalStorage):
    - completedSteps: string[] - array of step IDs that are completed
    - Storage key: `recipe-${recipe.title}` (so different recipes have separate state)

    Implementation:

    1. Header section:
       - Recipe title: text-2xl md:text-3xl font-bold text-white
       - ProgressBar below title
       - "Start over" button in top-right corner
         - text-gray-400 hover:text-white text-sm
         - Calls onStartOver prop

    2. Ingredients section:
       - Header: "Ingredients" as h2, text-xl font-semibold text-white mb-4
       - List: ul with space-y-2
       - Each ingredient as li:
         - Text: text-gray-300 text-lg
         - Format: "{quantity} {name}" with notes in parentheses if present
         - Example: "1 lb chicken thighs (boneless)"
       - Ingredients are NOT checkable (per CONTEXT.md)

    3. Sections (Prep, Cook, etc.):
       - All sections expanded by default (no collapse/expand per CONTEXT.md)
       - Each section:
         - Header: h2 with section.name, text-xl font-semibold text-white mb-4 mt-8
         - Steps as vertical list with space-y-4

    4. Each step:
       - Use label wrapping checkbox and text for large tap target (DES-02)
       - label: flex items-start gap-4 cursor-pointer py-2 (extra padding for touch)
       - Checkbox input:
         - type="checkbox"
         - checked={completedSteps.includes(step.id)}
         - onChange={() => toggleStep(step.id)}
         - Styling: h-7 w-7 shrink-0 accent-[#39FF6D] cursor-pointer mt-1
         - aria-label for accessibility
       - Step text:
         - text-lg md:text-xl for readability at arm's length (DES-03)
         - Color: text-white when unchecked, text-gray-400 when checked
         - NO strikethrough (per CONTEXT.md - checkmark only)
         - transition-colors for smooth change

    5. toggleStep function:
       - If step.id in completedSteps, remove it
       - Otherwise, add it
       - Use setCompletedSteps with callback pattern

    6. Calculate progress:
       - totalSteps = recipe.sections.reduce((acc, s) => acc + s.steps.length, 0)
       - completedCount = completedSteps.length

    Layout:
    - Container: max-w-2xl mx-auto px-4 py-8
    - Bottom padding for scrolling comfort: pb-24

    Mark as 'use client' at top.
  </action>
  <verify>
    cd frontend && npx tsc --noEmit
    No type errors.
  </verify>
  <done>
    - Recipe title and progress bar display
    - Ingredients shown as reference list
    - All sections expanded with step checkboxes
    - Checking step updates progress and persists to localStorage
    - Large tap targets for kitchen use
    - Text readable at arm's length
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run build` succeeds
2. `npx tsc --noEmit` has no type errors
3. Components ready to be wired into page.tsx (done in Plan 04)
</verification>

<success_criteria>
- WEB-03: Recipe renders as interactive checklist - DONE
- WEB-04: Progress bar shows completion - DONE
- WEB-05: Sections collapsible - SKIPPED (CONTEXT.md: all expanded by default)
- WEB-06: Checkbox state persists in localStorage - DONE
- DES-01: Mobile-first layout - DONE
- DES-02: Large tap targets - DONE (7x7 checkboxes, full label tappable)
- DES-03: High contrast, readable at arm's length - DONE (text-lg/xl)
</success_criteria>

<output>
After completion, create `.planning/phases/02-web-interface/02-03-SUMMARY.md`
</output>
